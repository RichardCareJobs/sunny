
:root { --bg:#fff; --fg:#111; --muted:#666; --chip:#ddd; --brand:#111; --ok:#136f63; --warn:#f4c95d; --bad:#c94f4f; }
* { box-sizing: border-box; }
html, body { height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--fg); background:var(--bg); }
#app { display:grid; grid-template-rows: auto 1fr; height: 100dvh; }
.toolbar { display:flex; align-items:center; gap:.6rem; padding:.6rem .8rem; border-bottom:1px solid #b64c00; background:#cc5500; color:#fff; position:sticky; top:0; z-index:1000; }
.toolbar h1 { font-size:1.1rem; font-weight:800; margin:0; color:#fff; }
.toolbar .spacer { flex:1; }
a.tiny { font-size:.85rem; color:#fff; text-decoration:none; }
#map { width:100%; height:100%; min-height:60vh; }
/* Inline minimal Leaflet CSS to ensure map renders on content:// */

.leaflet-container{position:relative;outline:0;overflow:hidden;-webkit-tap-highlight-color:transparent;}.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0;}.leaflet-container img{max-width:none !important;}.leaflet-container a{outline:0;}.leaflet-tile{filter:inherit;visibility:hidden;}.leaflet-tile-loaded{visibility:inherit;}.leaflet-zoom-animated{-webkit-transform-origin:0 0;transform-origin:0 0;}.leaflet-zoom-animated .leaflet-zoom-animated{will-change:transform}.leaflet-zoom-hide{visibility:hidden;}.leaflet-control{position:relative;z-index:800;pointer-events:auto;}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none;}.leaflet-top{top:0;}.leaflet-right{right:0;}.leaflet-left{left:0;}.leaflet-control{clear:both;}.leaflet-top .leaflet-control{margin-top:10px;}.leaflet-right .leaflet-control{margin-right:10px;}.leaflet-bottom .leaflet-control{margin-bottom:10px;}.leaflet-left .leaflet-control{margin-left:10px;}

.locate-control{pointer-events:auto;}
.locate-button{width:44px;height:44px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;box-shadow:0 10px 25px rgba(15,23,42,0.18);display:grid;place-items:center;cursor:pointer;transition:transform 0.15s ease,box-shadow 0.15s ease;}
.locate-button svg{width:22px;height:22px;fill:#111;}
.locate-button:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(15,23,42,0.22);}
.locate-button:active{transform:translateY(0);}
.locate-button:disabled{opacity:0.6;cursor:default;}
.locate-button.is-loading svg{animation:locate-spin 1s linear infinite;}
.leaflet-bottom .locate-control{margin-bottom:calc(10px + env(safe-area-inset-bottom));}
@keyframes locate-spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}


/* Filters button */
.fab { position: fixed; right: 12px; bottom: calc(92px + env(safe-area-inset-bottom)); z-index: 1100; border: none; border-radius: 999px; padding: .6rem .9rem; background: var(--brand); color: #fff; font-weight: 600; box-shadow: 0 6px 20px rgba(0,0,0,.2); }

/* Bottom carousel */
.carousel { position: fixed; left:0; right:0; bottom:0; z-index:1050; background:linear-gradient(to top, rgba(255,255,255,0.95), rgba(255,255,255,0.85)); padding: .5rem .5rem calc(.5rem + env(safe-area-inset-bottom)); border-top:1px solid #eee; }
.carousel-header { display:flex; align-items:center; justify-content:space-between; padding:0 .25rem .35rem; }
.view-toggle { display:flex; gap:.25rem; }
.view-toggle button { border:1px solid #ddd; background:#fff; border-radius:10px; padding:.35rem .6rem; }
.view-toggle .active { background:#111; color:#fff; border-color:#111; }
.cards { display:flex; gap:.5rem; overflow-x:auto; padding:.25rem; scroll-snap-type: x proximity; }
.card { min-width: 260px; max-width: 280px; flex:0 0 auto; border:2px solid #cc5500; border-radius:14px; background:#fff; padding:.6rem .7rem; box-shadow: 0 4px 14px rgba(0,0,0,.06); scroll-snap-align: start; }
.card h3 { margin:.1rem 0 .25rem; font-size:1rem; }
.badges { display:flex; flex-wrap:wrap; gap:.25rem; margin:.25rem 0 .35rem; }
.badge { font-size:.75rem; border:1px solid #ddd; border-radius:999px; padding:2px 6px; }
.b-sun-full { background:#136f63; color:#fff; border-color:#136f63; }
.b-sun-some { background:#f4c95d; color:#111; border-color:#f4c95d; }
.b-outdoor { background:#f1f1f1; }
.meta { font-size:.82rem; color:var(--muted); }
.actions { display:flex; gap:.4rem; margin-top:.5rem; flex-wrap: wrap; }
.actions a, .actions button { border:1px solid #ddd; background:#fff; border-radius:10px; padding:.35rem .6rem; text-decoration:none; color:inherit; }
.actions .primary { background:#111; color:#fff; border-color:#111; }

/* List panel */
.list-panel { position: fixed; left:0; right:0; bottom:0; background:#fff; z-index:1060; max-height: 45vh; overflow:auto; border-top:1px solid #eee; display:none; }
.list-panel.show { display:block; }
.list-item { display:flex; justify-content:space-between; align-items:flex-start; gap:.6rem; padding:.6rem .8rem; border-bottom:1px solid #f1f1f1; }
.list-item h4 { margin:.1rem 0; }

/* Detail modal */
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:1300; display:none; }
.modal-backdrop.show { display:block; }
.modal { position:fixed; left:0; right:0; bottom:0; z-index:1310; background:#fff; border-radius:16px 16px 0 0; box-shadow:0 -10px 30px rgba(0,0,0,.2); transform: translateY(100%); transition: transform .22s ease; }
.modal.show { transform: translateY(0); }
.modal-head { display:flex; align-items:center; justify-content:space-between; padding:.9rem 1rem; border-bottom:1px solid #eee; }
.modal-body { padding: .8rem 1rem 1rem; display:grid; gap:.6rem; }
.detail-map { height:180px; border-radius:12px; overflow:hidden; }

/* Bottom sheet (filters) */
.backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.35); z-index: 1200; opacity: 0; pointer-events: none; transition: opacity .18s ease; }
.sheet { position: fixed; left: 0; right: 0; bottom: 0; z-index: 1300; max-height: 85vh; background: #fff; border-radius: 16px 16px 0 0; box-shadow: 0 -10px 30px rgba(0,0,0,.2); transform: translateY(100%); transition: transform .22s ease; }
.sheet-head { display:flex; align-items:center; justify-content:space-between; padding: .9rem 1rem; border-bottom: 1px solid #eee; }
.sheet-body { padding: .8rem 1rem 1rem; overflow-y: auto; max-height: calc(85vh - 56px); display: grid; gap: 1rem; }
.icon-btn { background: transparent; border: 1px solid #ddd; border-radius: 8px; padding: .3rem .5rem; }
.sheet-actions { display:flex; gap:.6rem; justify-content:flex-end; padding-top: .5rem; }
.primary { background:#111; color:#fff; border:0; border-radius: 10px; padding:.6rem 1rem; }
.secondary { background:#f6f6f6; color:#111; border:1px solid #ddd; border-radius: 10px; padding:.6rem 1rem; }
.pill-row { display:flex; flex-wrap:wrap; gap:.5rem; }
.pill { border:1px solid #ddd; border-radius:999px; padding:.35rem .7rem; }
.pill input { margin-right:.35rem; }
.hidden { display:none; }
.backdrop.show { opacity: 1; pointer-events: auto; }
.sheet.show { transform: translateY(0); }

/* Pre-permission card */
.loc-card { position: fixed; left: 50%; transform: translateX(-50%); bottom: calc(56px + env(safe-area-inset-bottom)); width: min(540px, calc(100% - 24px)); z-index: 1200; background:#fff; border:1px solid #eee; border-radius:14px; padding:.8rem; box-shadow:0 8px 30px rgba(0,0,0,.18); display:none; }
.loc-card.show { display:block; }
.loc-card h4 { margin:.1rem 0 .4rem; }
.loc-card .row { display:flex; gap:.5rem; }
.loc-card button { flex:1; border:1px solid #ddd; border-radius:10px; padding:.5rem .7rem; background:#fff; }
.loc-card .primary { background:#111; color:#fff; border-color:#111; }

/* Empty state */
.empty { padding:.6rem .8rem; color:var(--muted); }

/* Venue detail card */
.venue-card { position: fixed; left:0; right:0; bottom:0; display:flex; justify-content:center; padding:0 8px; z-index:1250; pointer-events:none; opacity:0; transform: translateY(12px); transition: opacity .18s ease, transform .18s ease; }
.venue-card.show { opacity:1; transform: translateY(0); pointer-events:auto; }
.venue-card__inner { width:min(640px, calc(100% - 16px)); background:#fff; border:2px solid #cc5500; border-radius:18px 18px 0 0; box-shadow:0 -10px 30px rgba(0,0,0,.22); padding:1rem 1rem calc(1rem + env(safe-area-inset-bottom)); display:grid; gap:.55rem; }
.venue-card__handle { width:44px; height:4px; background:#e5e7eb; border-radius:999px; margin:0 auto .15rem; }
.venue-card__header { display:flex; justify-content:space-between; gap:.75rem; align-items:flex-start; }
.venue-card__name { font-size:1.15rem; font-weight:800; }
.venue-card__meta { color:var(--muted); font-size:.9rem; margin:.15rem 0; }
.venue-card__address { color:#374151; font-size:.95rem; }
.venue-card__close { border:1px solid #e5e7eb; background:#fff; border-radius:12px; width:36px; height:36px; font-size:1.1rem; cursor:pointer; }
.venue-card__section-title { font-size:.85rem; font-weight:700; color:#374151; }
.venue-card__badges { display:flex; gap:.35rem; flex-wrap:wrap; }
.chip { display:inline-flex; align-items:center; gap:.35rem; border:1px solid #e5e7eb; border-radius:999px; padding:6px 10px; font-size:.85rem; background:#f9fafb; color:#111; }
.chip-emoji { font-size:1rem; }
.chip-good { background:#e8f7ef; border-color:#bbf7d0; color:#166534; }
.chip-warn { background:#fff1f2; border-color:#fecdd3; color:#9f1239; }
.chip-info { background:#eff6ff; border-color:#bfdbfe; color:#1d4ed8; }
.chip-muted { background:#f3f4f6; border-color:#e5e7eb; color:#4b5563; }
.venue-card__note { color:#4b5563; font-size:.95rem; }
.venue-card__actions { display:flex; gap:.5rem; flex-wrap:wrap; }
.venue-card__actions .action { border:1px solid #e5e7eb; border-radius:12px; padding:.6rem .9rem; text-decoration:none; color:#111; font-weight:700; background:#fff; box-shadow:0 3px 10px rgba(0,0,0,.06); }
.venue-card__actions .action.primary { background:#111; color:#fff; border-color:#111; }
.venue-card__actions .action.muted { color:#0a66c2; }
